package matrix;

import static org.junit.Assert.*;

import org.junit.Test;

public class SolveTest {

	@Test
	public void testStep() {
		SystemMatrix left = new SystemMatrix(new String[][] {
			{"4.00", "1.00", "-2.01", "2.99"},
			{"0.00", "6.00", "2.06", "8.05"},
			{"0.00", "0.00", "2.37", "2.27"}
		}, 3);
		Solve a = new Solve(left);
		String step1 = 
				  "  4.00x1 +     x2 - 2.01x3 = 2.99\r\n"
				+ "           6.00x2 + 2.06x3 = 8.05\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1 +     x2 - 2.01*(0.958) = 2.99\r\n"
				+ "           6.00x2 + 2.06*(0.958) = 8.05\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1 +     x2 - 1.93   = 2.99\r\n"
				+ "           6.00x2 + 1.97   = 8.05\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1 +     x2          = 4.92\r\n"
				+ "           6.00x2          = 6.08\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n";	
		assertEquals(step1, a.step());
		String step2 = 
				  "  4.00x1 +     x2          = 4.92\r\n"
				+ "               x2          = 1.01\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1 + 1.00*(1.01)          = 4.92\r\n"
				+ "               x2          = 1.01\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1 + 1.01            = 4.92\r\n"
				+ "               x2          = 1.01\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n"
				+ "  4.00x1                   = 3.91\r\n"
				+ "               x2          = 1.01\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n";
		assertEquals(step2, a.step());
		String step3 = 
				  "      x1                   = 0.978\r\n"
				+ "               x2          = 1.01\r\n"
				+ "                        x3 = 0.958\r\n"
				+ "___________________________________________\r\n";
		assertEquals(step3, a.step());
		assertFalse(a.hasNext());
	}

}
